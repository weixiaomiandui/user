webpackJsonp([5,8],{238:function(t,e,i){var n=i(0)(i(245),i(257),null,null);t.exports=n.exports},245:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{title:"",content:"",selectType:"",typeList:[{key:"share",value:"分享"},{key:"ask",value:"问答"},{key:"job",value:"招聘"}]}},activated:function(){this.$store.commit("SET_SHOWTABBAR",!0),this.$store.commit("SET_ISAGAINLOADING",!0),localStorage.setItem("isAgainLoading",!0)},computed:{minHeight:function(){return document.body.clientHeight>=400&&document.body.clientHeight<=736?document.body.clientHeight:window.screen.height}},methods:{checkLogin:function(){var t=this.$store.getters.accessToken;return!!t||(this.$vux.toast.show({text:"请先登录"}),this.$router.push("/login"),!1)},onSendArticle:function(){var t=this;if(this.checkLogin()){if(!this.title)return this.$vux.toast.show({text:"请填写标题"}),!1;if(!this.content)return this.$vux.toast.show({text:"请填写内容"}),!1;this.$loading.show(),this.$axios.post("/topics",{accesstoken:this.$store.getters.accessToken,title:this.title,content:this.content,tab:this.selectType}).then(function(e){t.$vux.toast.show({text:"发布成功"}),t.$loading.hide(),t.$router.push({name:"detail",query:{id:e.data.topic_id}})}).catch(function(e){console.log(e),t.$vux.toast.show({text:"发布失败"}),t.$loading.hide()})}}}}},257:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"create-box",style:{minHeight:t.minHeight+"px"}},[i("group",{attrs:{title:"新话题"}},[i("x-button",{staticStyle:{position:"absolute",right:"14px","font-size":"12px"},attrs:{type:"primary",mini:""},nativeOn:{click:function(e){t.onSendArticle(e)}},slot:"button"},[t._v("发布\n    ")]),t._v(" "),i("selector",{directives:[{name:"model",rawName:"v-model",value:t.selectType,expression:"selectType"}],attrs:{title:"分类",options:t.typeList},domProps:{value:t.selectType},on:{input:function(e){t.selectType=e}}}),t._v(" "),i("x-input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{placeholder:"标题，字数10字以上"},domProps:{value:t.title},on:{input:function(e){t.title=e}}}),t._v(" "),i("x-textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{height:t.minHeight-42-44-22-40,name:"description",placeholder:"说点什么吧..."},domProps:{value:t.content},on:{input:function(e){t.content=e}}})],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=5.37bb20464b4048a69f66.js.map