{"version":3,"sources":["webpack:///static/js/5.37bb20464b4048a69f66.js","webpack:///./src/views/ArticleCreate.vue","webpack:///ArticleCreate.vue","webpack:///./src/views/ArticleCreate.vue?521d"],"names":["webpackJsonp","238","module","exports","__webpack_require__","Component","245","__webpack_exports__","Object","defineProperty","value","data","title","content","selectType","typeList","key","activated","this","$store","commit","localStorage","setItem","computed","minHeight","document","body","clientHeight","window","screen","height","methods","checkLogin","accessToken","getters","$vux","toast","show","text","$router","push","onSendArticle","_this","$loading","$axios","post","accesstoken","tab","then","result","hide","name","query","id","topic_id","catch","e","console","log","257","render","_vm","_h","$createElement","_c","_self","staticClass","style","attrs","staticStyle","position","right","font-size","type","mini","nativeOn","click","$event","slot","_v","directives","rawName","expression","options","domProps","on","input","placeholder","staticRenderFns"],"mappings":"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","file":"static/js/5.37bb20464b4048a69f66.js","sourcesContent":["webpackJsonp([5,8],{\n\n/***/ 238:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(245),\n  /* template */\n  __webpack_require__(257),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 245:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = {\n  data: function data() {\n    return {\n      title: '',\n      content: '',\n      selectType: '',\n      typeList: [{ key: 'share', value: '分享' }, { key: 'ask', value: '问答' }, { key: 'job', value: '招聘' }]\n    };\n  },\n  activated: function activated() {\n    this.$store.commit('SET_SHOWTABBAR', true);\n    this.$store.commit('SET_ISAGAINLOADING', true);\n    localStorage.setItem('isAgainLoading', true);\n  },\n\n  computed: {\n    minHeight: function minHeight() {\n      return document.body.clientHeight >= 400 && document.body.clientHeight <= 736 ? document.body.clientHeight : window.screen.height;\n    }\n  },\n  methods: {\n    checkLogin: function checkLogin() {\n      var accessToken = this.$store.getters.accessToken;\n      if (!accessToken) {\n        this.$vux.toast.show({\n          text: '请先登录'\n        });\n        this.$router.push('/login');\n        return false;\n      } else {\n        return true;\n      }\n    },\n    onSendArticle: function onSendArticle() {\n      var _this = this;\n\n      if (this.checkLogin()) {\n        if (!this.title) {\n          this.$vux.toast.show({\n            text: '请填写标题'\n          });\n          return false;\n        }\n        if (!this.content) {\n          this.$vux.toast.show({\n            text: '请填写内容'\n          });\n          return false;\n        }\n        this.$loading.show();\n        this.$axios.post('/topics', {\n          accesstoken: this.$store.getters.accessToken,\n          title: this.title,\n          content: this.content,\n          tab: this.selectType\n        }).then(function (result) {\n          _this.$vux.toast.show({\n            text: '发布成功'\n          });\n          _this.$loading.hide();\n          _this.$router.push({\n            name: 'detail',\n            query: {\n              id: result.data.topic_id\n            }\n          });\n        }).catch(function (e) {\n          console.log(e);\n          _this.$vux.toast.show({\n            text: '发布失败'\n          });\n          _this.$loading.hide();\n        });\n      }\n    }\n  }\n};\n\n/***/ }),\n\n/***/ 257:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"create-box\",\n    style: ({\n      minHeight: _vm.minHeight + 'px'\n    })\n  }, [_c('group', {\n    attrs: {\n      \"title\": \"新话题\"\n    }\n  }, [_c('x-button', {\n    staticStyle: {\n      \"position\": \"absolute\",\n      \"right\": \"14px\",\n      \"font-size\": \"12px\"\n    },\n    attrs: {\n      \"type\": \"primary\",\n      \"mini\": \"\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.onSendArticle($event)\n      }\n    },\n    slot: \"button\"\n  }, [_vm._v(\"发布\\n    \")]), _vm._v(\" \"), _c('selector', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.selectType),\n      expression: \"selectType\"\n    }],\n    attrs: {\n      \"title\": \"分类\",\n      \"options\": _vm.typeList\n    },\n    domProps: {\n      \"value\": (_vm.selectType)\n    },\n    on: {\n      \"input\": function($event) {\n        _vm.selectType = $event\n      }\n    }\n  }), _vm._v(\" \"), _c('x-input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.title),\n      expression: \"title\"\n    }],\n    attrs: {\n      \"placeholder\": \"标题，字数10字以上\"\n    },\n    domProps: {\n      \"value\": (_vm.title)\n    },\n    on: {\n      \"input\": function($event) {\n        _vm.title = $event\n      }\n    }\n  }), _vm._v(\" \"), _c('x-textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.content),\n      expression: \"content\"\n    }],\n    attrs: {\n      \"height\": _vm.minHeight - 42 - 44 - 22 - 40,\n      \"name\": \"description\",\n      \"placeholder\": \"说点什么吧...\"\n    },\n    domProps: {\n      \"value\": (_vm.content)\n    },\n    on: {\n      \"input\": function($event) {\n        _vm.content = $event\n      }\n    }\n  })], 1)], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/5.37bb20464b4048a69f66.js","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ArticleCreate.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-7e9087e5!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ArticleCreate.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/ArticleCreate.vue\n// module id = 238\n// module chunks = 5","<template>\n  <div class=\"create-box\" :style=\"{minHeight: minHeight + 'px'}\">\n    <group title=\"新话题\">\n      <x-button type=\"primary\" mini slot=\"button\" style=\"position: absolute;right: 14px;font-size: 12px\"\n                @click.native=\"onSendArticle\">发布\n      </x-button>\n      <selector title=\"分类\" :options=\"typeList\" v-model=\"selectType\"></selector>\n      <x-input placeholder=\"标题，字数10字以上\" v-model=\"title\"></x-input>\n      <x-textarea :height=\"minHeight - 42 - 44 - 22 - 40\" v-model=\"content\" name=\"description\"\n                  placeholder=\"说点什么吧...\"></x-textarea>\n    </group>\n  </div>\n</template>\n\n<script>\n  export default {\n    data () {\n      return {\n        title: '',\n        content: '',\n        selectType: '',\n        typeList: [\n          {key: 'share', value: '分享'},\n          {key: 'ask', value: '问答'},\n          {key: 'job', value: '招聘'}\n        ]\n      }\n    },\n    activated(){\n      this.$store.commit('SET_SHOWTABBAR', true)\n      this.$store.commit('SET_ISAGAINLOADING', true)\n      localStorage.setItem('isAgainLoading', true)\n    },\n    computed: {\n      minHeight: () => {\n        return (document.body.clientHeight >= 400 && document.body.clientHeight <= 736) ? document.body.clientHeight : window.screen.height\n      },\n    },\n    methods: {\n      checkLogin(){\n        let accessToken = this.$store.getters.accessToken\n        if (!accessToken) {\n          this.$vux.toast.show({\n            text: '请先登录',\n          })\n          this.$router.push('/login')\n          return false\n        } else {\n          return true\n        }\n      },\n      onSendArticle(){\n        if (this.checkLogin()) {\n          if (!this.title) {\n            this.$vux.toast.show({\n              text: '请填写标题',\n            })\n            return false\n          }\n          if (!this.content) {\n            this.$vux.toast.show({\n              text: '请填写内容',\n            })\n            return false\n          }\n          this.$loading.show()\n          this.$axios.post(`/topics`, {\n            accesstoken: this.$store.getters.accessToken,\n            title: this.title,\n            content: this.content,\n            tab: this.selectType\n          })\n            .then(result => {\n              this.$vux.toast.show({\n                text: '发布成功',\n              })\n              this.$loading.hide()\n              this.$router.push({\n                name: 'detail',\n                query: {\n                  id: result.data.topic_id\n                }\n              })\n            })\n            .catch(e => {\n              console.log(e)\n              this.$vux.toast.show({\n                text: '发布失败',\n              })\n              this.$loading.hide()\n            })\n        }\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// ArticleCreate.vue?7a97827d","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"create-box\",\n    style: ({\n      minHeight: _vm.minHeight + 'px'\n    })\n  }, [_c('group', {\n    attrs: {\n      \"title\": \"新话题\"\n    }\n  }, [_c('x-button', {\n    staticStyle: {\n      \"position\": \"absolute\",\n      \"right\": \"14px\",\n      \"font-size\": \"12px\"\n    },\n    attrs: {\n      \"type\": \"primary\",\n      \"mini\": \"\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.onSendArticle($event)\n      }\n    },\n    slot: \"button\"\n  }, [_vm._v(\"发布\\n    \")]), _vm._v(\" \"), _c('selector', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.selectType),\n      expression: \"selectType\"\n    }],\n    attrs: {\n      \"title\": \"分类\",\n      \"options\": _vm.typeList\n    },\n    domProps: {\n      \"value\": (_vm.selectType)\n    },\n    on: {\n      \"input\": function($event) {\n        _vm.selectType = $event\n      }\n    }\n  }), _vm._v(\" \"), _c('x-input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.title),\n      expression: \"title\"\n    }],\n    attrs: {\n      \"placeholder\": \"标题，字数10字以上\"\n    },\n    domProps: {\n      \"value\": (_vm.title)\n    },\n    on: {\n      \"input\": function($event) {\n        _vm.title = $event\n      }\n    }\n  }), _vm._v(\" \"), _c('x-textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.content),\n      expression: \"content\"\n    }],\n    attrs: {\n      \"height\": _vm.minHeight - 42 - 44 - 22 - 40,\n      \"name\": \"description\",\n      \"placeholder\": \"说点什么吧...\"\n    },\n    domProps: {\n      \"value\": (_vm.content)\n    },\n    on: {\n      \"input\": function($event) {\n        _vm.content = $event\n      }\n    }\n  })], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-7e9087e5!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/ArticleCreate.vue\n// module id = 257\n// module chunks = 5"],"sourceRoot":""}