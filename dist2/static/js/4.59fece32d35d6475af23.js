webpackJsonp([4,8],{240:function(t,e,s){var a=s(0)(s(247),s(254),null,null);t.exports=a.exports},247:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{page:1,limit:20,articleList:[],status:{pullupStatus:"default",pulldownStatus:"default"}}},mounted:function(){this.onRefresh()},activated:function(){this.$store.commit("SET_SHOWTABBAR",!0)},methods:{onRefresh:function(){var t=this;this.$loading.show(),this.$axios.get("/topics",{params:{page:1,limit:20}}).then(function(e){console.log(e),t.articleList=e.data.data,t.$nextTick(function(){t.$refs.scroller.donePulldown(),t.$refs.scroller.reset(),t.$loading.hide()})}).catch(function(e){console.log(e),t.$vux.toast.show({text:"获取数据失败"}),t.$loading.hide()})},onLoadMore:function(){var t=this,e=this;this.$axios.get("/topics",{params:{page:e.page+1,limit:20}}).then(function(s){t.articleList=t.articleList.concat(s.data.data),t.$nextTick(function(){e.page++,t.$refs.scroller.donePullup(),t.$refs.scroller.reset()})}).catch(function(e){console.log(e),t.$vux.toast.show({text:"获取数据失败"}),t.$loading.hide()})}},computed:{minHeight:function(){return document.body.clientHeight>=400&&document.body.clientHeight<=736?document.body.clientHeight:window.screen.height}}}},254:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("scroller",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],ref:"scroller",attrs:{"lock-x":"","scrollbar-y":"","use-pullup":"","use-pulldown":"",height:"-50"},domProps:{value:t.status},on:{"on-pullup-loading":t.onLoadMore,"on-pulldown-loading":t.onRefresh,input:function(e){t.status=e}}},[s("div",{staticClass:"feed-box"},t._l(t.articleList,function(e){return s("div",{staticClass:"feed-li"},[s("router-link",{attrs:{to:{name:"detail",query:{id:e.id}}}},[s("div",{staticClass:"feed-title"},[s("div",{staticClass:"feed-label",class:[e.top?"feed-label-top":"feed-label-other"]},[t._v("\n              "+t._s(t._f("translateTab")(e.tab,e.top))+"\n            ")]),t._v(" "),s("p",{domProps:{textContent:t._s(e.title)}})]),t._v(" "),s("div",{staticClass:"feed-content"},[s("router-link",{attrs:{to:{name:"user",query:{id:e.author.loginname}}}},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:e.author.avatar_url,alt:"headImgUrl"}})])]),t._v(" "),s("div",{staticClass:"feed-right"},[s("div",{staticClass:"feed-right-top"},[s("div",{staticClass:"feed-name",domProps:{textContent:t._s(e.author.loginname)}}),t._v(" "),s("div",{staticClass:"feed-count"},[s("span",{domProps:{textContent:t._s(e.reply_count)}}),t._v(" / "+t._s(e.visit_count)+"\n                ")])]),t._v(" "),s("div",{staticClass:"feed-right-bottom"},[s("div",{staticClass:"feed-time"},[t._v("\n                  创建于："),s("span",[t._v(t._s(t._f("formatDate")(e.create_at,"yyyy-MM-dd hh:mm:ss")))])]),t._v(" "),s("div",{staticClass:"feed-pass"},[t._v("\n                  "+t._s(t._f("timeAgo")(e.last_reply_at))+"\n                ")])])])],1)])],1)})),t._v(" "),s("div",{staticClass:"xs-plugin-pullup-container xs-plugin-pullup-up",staticStyle:{position:"absolute",width:"100%",height:"40px",bottom:"-40px","text-align":"center"},slot:"pullup"},[s("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.status.pullupStatus,expression:"status.pullupStatus === 'loading'"}],staticStyle:{"line-height":"40px"}},[s("spinner",{attrs:{type:"ios-small"}})],1)])])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=4.59fece32d35d6475af23.js.map