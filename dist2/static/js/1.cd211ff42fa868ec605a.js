webpackJsonp([1,8],{243:function(t,e,a){var s=a(0)(a(250),a(258),null,null);t.exports=s.exports},250:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{currTab:0,displayList:[],userInfo:{loginname:"",avatar_url:"",githubUsername:"",create_at:new Date,score:0,recent_topics:[],recent_replies:[]}}},activated:function(){this.onUpdateData()},methods:{onUpdateData:function(){"me"===this.$route.name?(this.$store.commit("SET_SHOWTABBAR",!0),this.checkLogin()&&this.onFetchUser(this.$store.getters.loginInfo.loginname)):(this.$store.commit("SET_SHOWTABBAR",!1),this.$route.query.id&&this.onFetchUser(this.$route.query.id))},onLogout:function(){localStorage.setItem("accessToken",null),this.$store.commit("SET_LOGININFO",{avatarUrl:"",id:"",loginname:"",accessToken:null}),this.$router.push("/login")},onSwitchTab:function(t){var e=this;this.currTab=t,2===t?this.$axios.get("/topic_collect/"+this.userInfo.loginname).then(function(t){console.log(t),e.displayList=t.data.data}).catch(function(t){console.log(t),e.$vux.toast.show({text:"获取数据失败"})}):this.onFetchUser(this.userInfo.loginname)},onFetchUser:function(t){var e=this;this.$axios.get("/user/"+t).then(function(t){e.userInfo.loginname=t.data.data.loginname,e.userInfo.avatar_url=t.data.data.avatar_url,e.userInfo.githubUsername=t.data.data.githubUsername,e.userInfo.create_at=t.data.data.create_at,e.userInfo.score=t.data.data.score,e.userInfo.recent_topics=t.data.data.recent_topics,e.userInfo.recent_replies=t.data.data.recent_replies,e.displayList=0===e.currTab?t.data.data.recent_replies:t.data.data.recent_topics}).catch(function(t){console.log(t),e.$vux.toast.show({text:"获取数据失败"})})},checkLogin:function(){var t=this.$store.getters.accessToken;return!!t||(this.$vux.toast.show({text:"请先登录"}),this.$router.replace("/login"),!1)}},computed:{minHeight:function(){return document.body.clientHeight>=400&&document.body.clientHeight<=736?document.body.clientHeight:window.screen.height},isShowBtnLogout:function(){return this.$store.getters.loginInfo.loginname===this.userInfo.loginname}}}},258:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-box",style:{minHeight:t.isShowBtnLogout?t.minHeight+"px":t.minHeight-50+"px"}},[a("div",{staticClass:"user-head-box"},[a("div",{staticClass:"big-avatar"},[a("img",{attrs:{src:t.userInfo.avatar_url,alt:""}})]),t._v(" "),a("div",{staticClass:"user-head-title"},[a("div",{staticClass:"user-head-name",domProps:{textContent:t._s(t.userInfo.loginname)}}),t._v(" "),a("div",{staticClass:"user-head-link"},[a("a",{attrs:{href:"https://github.com/"+t.userInfo.githubUsername}},[t._v(t._s(t.userInfo.githubUsername)+"@github.com")])])]),t._v(" "),a("div",{staticClass:"user-head-intro"},[t._v("\n      注册时间："+t._s(t._f("timeAgo")(t.userInfo.create_at))+"\n      "),a("span",[t._v("积分："+t._s(t.userInfo.score))])])]),t._v(" "),a("tab",[a("tab-item",{attrs:{selected:""},nativeOn:{click:function(e){t.onSwitchTab(0)}}},[t._v("最近回复")]),t._v(" "),a("tab-item",{nativeOn:{click:function(e){t.onSwitchTab(1)}}},[t._v("最新发布")]),t._v(" "),a("tab-item",{nativeOn:{click:function(e){t.onSwitchTab(2)}}},[t._v("话题收藏")])],1),t._v(" "),a("div",{staticClass:"feed-box"},t._l(t.displayList,function(e){return a("div",{staticClass:"feed-li"},[a("router-link",{attrs:{to:{name:"detail",query:{id:e.id}}}},[a("div",{staticClass:"feed-content"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e.author.avatar_url,alt:"headImgUrl"}})]),t._v(" "),a("div",{staticClass:"feed-right"},[a("div",{staticClass:"feed-right-top"},[a("div",{staticClass:"feed-title"},[a("p",{domProps:{textContent:t._s(e.title)}})])]),t._v(" "),a("div",{staticClass:"feed-right-bottom"},[a("div",{staticClass:"feed-time"},[a("span",[t._v(t._s(e.author.loginname))])]),t._v(" "),a("div",{staticClass:"feed-pass"},[t._v("\n                "+t._s(t._f("timeAgo")(e.last_reply_at))+"\n              ")])])])])])],1)})),t._v(" "),a("div",{staticClass:"ext-btn-reply btn-logout",class:{hide:!t.isShowBtnLogout},on:{click:t.onLogout}},[t._v("\n    注销\n  ")])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=1.cd211ff42fa868ec605a.js.map